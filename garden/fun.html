<html>
<head>
<script type="text/javascript">
/*The final listing. Top down. Face down. Deal from right to left among
audience. Create code from left to right. 0=black, 1=red. Cards displayed
red first, then black. Ordered as seen by me facing audience.
0"image/PNG-cards-1.3/9_of_clubs.png",
1"image/PNG-cards-1.3/6_of_spades.png",
2"image/PNG-cards-1.3/4_of_spades.png",
3"image/PNG-cards-1.3/7_of_clubs.png",
4"image/PNG-cards-1.3/8_of_clubs.png",
5"image/PNG-cards-1.3/6_of_diamonds.png",
6"image/PNG-cards-1.3/2_of_clubs.png",
7"image/PNG-cards-1.3/9_of_spades.png",
8"image/PNG-cards-1.3/5_of_diamonds.png",
9"image/PNG-cards-1.3/7_of_spades.png",
10"image/PNG-cards-1.3/3_of_diamonds.png",
11"image/PNG-cards-1.3/8_of_diamonds.png",
12"image/PNG-cards-1.3/6_of_clubs.png",
13"image/PNG-cards-1.3/5_of_spades.png",
14"image/PNG-cards-1.3/9_of_diamonds.png",
15"image/PNG-cards-1.3/5_of_hearts.png",
16"image/PNG-cards-1.3/2_of_diamonds.png",
17"image/PNG-cards-1.3/7_of_hearts.png",
18"image/PNG-cards-1.3/7_of_diamonds.png",
19"image/PNG-cards-1.3/3_of_clubs.png",
20"image/PNG-cards-1.3/3_of_spades.png",
21"image/PNG-cards-1.3/2_of_spades.png",
22"image/PNG-cards-1.3/9_of_hearts.png",
23"image/PNG-cards-1.3/8_of_hearts.png",
24"image/PNG-cards-1.3/8_of_spades.png",
25"image/PNG-cards-1.3/4_of_hearts.png",
26"image/PNG-cards-1.3/2_of_hearts.png",
27"image/PNG-cards-1.3/4_of_diamonds.png",
28"image/PNG-cards-1.3/5_of_clubs.png",
29"image/PNG-cards-1.3/3_of_hearts.png",
30"image/PNG-cards-1.3/4_of_clubs.png"
31"image/PNG-cards-1.3/6_of_hearts.png",
*/

var images = new Array()
var n = 0;
function preload() {
  n =   preload.arguments.length;
  for (i = 0; i <n;  i++) {
  	images[i] = new Image()
	images[i].src = preload.arguments[i]
  }
}
/*Top to bottom face down. Deal from right to left among
audience. Create code from left to right.*/
preload(
"image/PNG-cards-1.3/6_of_diamonds.png",
"image/PNG-cards-1.3/5_of_diamonds.png",
"image/PNG-cards-1.3/3_of_diamonds.png",
"image/PNG-cards-1.3/8_of_diamonds.png",
"image/PNG-cards-1.3/9_of_diamonds.png",
"image/PNG-cards-1.3/5_of_hearts.png",
"image/PNG-cards-1.3/2_of_diamonds.png",
"image/PNG-cards-1.3/7_of_hearts.png",
"image/PNG-cards-1.3/7_of_diamonds.png",
"image/PNG-cards-1.3/9_of_hearts.png",
"image/PNG-cards-1.3/8_of_hearts.png",
"image/PNG-cards-1.3/4_of_hearts.png",
"image/PNG-cards-1.3/2_of_hearts.png",
"image/PNG-cards-1.3/4_of_diamonds.png",
"image/PNG-cards-1.3/3_of_hearts.png",
"image/PNG-cards-1.3/6_of_hearts.png",


"image/PNG-cards-1.3/9_of_clubs.png",
"image/PNG-cards-1.3/6_of_spades.png",
"image/PNG-cards-1.3/4_of_spades.png",
"image/PNG-cards-1.3/7_of_clubs.png",
"image/PNG-cards-1.3/8_of_clubs.png",
"image/PNG-cards-1.3/2_of_clubs.png",
"image/PNG-cards-1.3/9_of_spades.png",
"image/PNG-cards-1.3/7_of_spades.png",
"image/PNG-cards-1.3/6_of_clubs.png",
"image/PNG-cards-1.3/5_of_spades.png",
"image/PNG-cards-1.3/3_of_clubs.png",
"image/PNG-cards-1.3/3_of_spades.png",
"image/PNG-cards-1.3/2_of_spades.png",
"image/PNG-cards-1.3/8_of_spades.png",
"image/PNG-cards-1.3/5_of_clubs.png",
"image/PNG-cards-1.3/4_of_clubs.png"
);



var what = new Array(5) 
var gap = new Array(5);
var final = new Array(5);
var count = new Array(20,20,20,20,20);
var showRed = function(wmi) {
  var i=document.getElementById('pic'+wmi);
  what[wmi] = Math.floor(Math.random()*16);
  i.src=images[what[wmi]].src;
  gap[wmi] = 100+100*Math.random();
  count[wmi]--;
  if(count[wmi] > 0)
    setTimeout('showRed('+wmi+')', gap[wmi]);
  else
    i.src=images[final[wmi]].src;
}

var showBlack = function(wmi) {
  var i=document.getElementById('pic'+wmi);
  what[wmi] = 16+Math.floor(Math.random()*16);
  i.src=images[what[wmi]].src;
  gap[wmi] = 100+100*Math.random();
  count[wmi]--;
  if(count[wmi] > 0)
    setTimeout('showBlack('+wmi+')', gap[wmi]);
  else
    i.src=images[final[wmi]].src;
}

var inverse = {
"00000": 0, "00001": 1, "00010": 2, "00100": 3, 
"01001": 4, "10010": 5, "00101": 6, "01011": 7, 
"10110": 8, "01100": 9, "11001": 10, "10011": 11, 
"00111": 12, "01111": 13, "11111": 14, "11110": 15,
"11100": 16, "11000": 17, "10001": 18, "00011": 19,
"00110": 20, "01101": 21, "11011": 22, "10111": 23,
"01110": 24, "11101": 25, "11010": 26, "10101": 27,
"01010": 28, "10100": 29, "01000": 30, "10000": 31}


var state = 0

var val = -1;
var nRed = 0
var nBlack = 0
var redPos = new Array(5)
var blackPos = new Array(5)
function getSecret() {
  sec= document.getElementById('secret').value;
  val = inverse[sec]
  for(i=0;i<5;i++) 
    if(sec[i]=="1") {
     redPos[nRed]=i
     nRed++
    }
    else {
     blackPos[nBlack]=i
     nBlack++
    }
}

//Top to bottom, face down. 0=black, 1=red. e.g., first 0 is 
//9 of clubs
          //0       4       8       2     
var temp = [0,0,0,0,0,1,0,0,1,0,1,1,0,0,1,1,
          //6       0       4       8   
            1,1,1,0,0,0,1,1,0,1,1,1,0,1,0,1]



var order = new Array(32);
var nextBlack = 16
var nextRed = 0
for(k=0;k<32;k++) {
  if(temp[k]==0) {
    order[k] = nextBlack
    nextBlack++
  }
  else {
    order[k] = nextRed
    nextRed++
  }
}


function decide() {
  for(i=0;i<nRed;i++)
    final[i] = order[(val+redPos[i])%32]
  for(i=nRed;i<5;i++)
    final[i] = order[(val+blackPos[i-nRed])%32]
}

function sh() {
  var i;
  if(state==0) {
    getSecret()
    decide()
    for(i=0;i<nRed;i++)
      showRed(i)
    state = 1
  }
  else {
    for(i=nRed;i<5;i++)
      showBlack(i)
  }
}
</script>
</head>
<body>
<center>
<h1>MINDOS: The Mind Reading Software</h1>
<table><tr><th align="right">User:</th><td><input type="text" length="10"></input></td></tr>
<tr><th align="right">Password:</th><td><input type="password" length="10" id="secret"></input></td></tr>
<tr><td /><td><input type="button" value="Connect to mind" onclick="sh()"></input></td></tr></table>
<center>
<img src="image/golden-skull2.jpg" width="100">
<img id="pic0" width="100"/>
<img id="pic1" width="100"/>
<img id="pic2" width="100"/>
<img id="pic3" width="100"/>
<img id="pic4" width="100"/>
<img src="image/golden-skull.jpg" width="100">
</center>
<div id="dbg"></div>
</body>
</html>
